## 凸函数
### 3.1 基本性质和例子
### 3.1.1 定义
函数$f:R^n ->R$是凸的，如果$dom f$是凸集，且对于任意$x, y \in domf$和任意$0 <= \theta <=1$，有：
$$ f(\theta x + (1-\theta)y) \leq \theta f(x) + (1-\theta) f(y) $$
函数是凸的，当且仅当其在于其定义域相交的任意直线上都是凸的。

换言之，函数$f$是凸的，当且仅当对于任意$x \in domf$ 和任意向量$v$，函数$g(t) = f(x + tv)$是凸的（其定义域为$\{t| x + tv \in dom f\}$。(证明后续补)

**一阶条件**

假设$f$可微（即其梯度$\bigtriangledown f$在开集$domf$内处处促成你在），则函数$f$是凸函数的充要条件是$domf$是凸集且对于任意$x,y \in domf $下式成立：
$$ f(y) \geq f(x) + \bigtriangledown f(x)^T(y-x)$$

**二阶条件**

假设函数$f$二阶可微，即对于开集$domf$内的任意一点，它的Hessian矩阵或者二阶导数$\bigtriangledown^2f$存在，则函数f是凸函数的充要条件是，其Hessian矩阵式半正定矩阵：即对于所有的$x \in domf$，有：
$$ \bigtriangledown^2 f(x) \geq 0 $$

**例子**：

指数函数：对于$a \in R$，函数$e^{ax}$在$R$上是凸的。   
幂函数：函数$f(x) = x^a$在$R_{++}$上当$a \leq 0$时对数-凸函数，当$a \geq 0$时对数-凹函数。  
绝对值幂函数：当$p \geq 1$时，函数$|x|^p$在$R$上是凸函数。  
对数函数：函数$logx$在$R_{++}$上是凹函数。  
负熵：函数$xlogx$在其定义域上是凸函数。

在$R^n$上的一些例子：  

范数 :$R^n$上的任意范数均为凸函数。  
最大值函数： 函数$f(x) = max{x_1, ..., x_n}$在$R^n$上是凸函数。    
二次-线性分式函数：函数$f(x, y) = x^2/y$，其定义域为
$$ dom f = R × R_{++}  = \{(x, y) \in R^2 | y>0\} $$ 
指数和的对数：函数$f(x) = log(e^{x_1} + ... + e^{x_n})$在$R^n$上是凸函数。对于任意的$x$，下面的不等式成立：
$$ max\{x_1, ..., x_n\} <= f(x) <= max\{x_1, ..., x_n\} + logn$$
几何平均：几个平均函数$f(x)$在其定义上为凹函数。
对数行列式：$f(X) = log\det(X)$在定义域$dom f = S_{++}^{n}$上是凹函数。

**ps**: 柯西施瓦兹不等式
$$ (a^Ta)(b^Tb) \geq (a^Tb)^2 $$

### 3.2 保持函数凸性
非负加权和
$$ f = w_1f_1 + ... + w_m f_m$$
扩展到：
$$ g(x) = \int _A w(y)f(x, y)dy$$

#### 3.2.2 复合仿射映射
假设函数$f: R^n \rightarrow R, A \in R^{n×m}$，以及$b \in R^n$，定义$g: R^m \rightarrow R$ 为
$$ g(x) = f(Ax + b)$$
其中$dom g = \{Ax + b \in domf \}$。若函数$f$是凸函数，则函数$g$为凸函数。

#### 3.2.3 逐点最大和逐点上确界

如果函数$f_1$和$f_2$均为凸函数，则两者的逐点最大函数$f$
$$ f(x) = max\{f_1(x), f_2(x)\} $$
其定义域为$dom f = dom f_1  \cap  dom f_2 $仍然是凸函数。

分片线性函数，函数：
$$ f(x) = max(a_1^Tx + b_1 + ..., a_L^Tx + b_L)$$
定义了一个分片线性函数。

最大$r$个分量之和：
对于任意$x \in R^n$，用$x_{[i]}$表示$x$中第$i$大的分量，即将$x$的分量按照非升序进行排列得到下式：
$$ x_{[1]} \geq x_{[2]} \geq ... \geq x_{[n]} $$
则对$x$的最大$r$个分量进行求和所得到的函数：
$$ f(x)  = \sum_{i=1}^r x_{[i]}$$
是凸函数。
该函数可以理解为从$x$的分量中选取$r$个不同分量。可以理解为$f$为若干个线性函数的逐点最大，所以是凸函数。

逐点最大的性质可以扩展至无限个凸函数的逐点上确界。如果对于任意$y \in A$，函数$f(x,y)$关于$x$都是凸的，则函数$g$
$$ g(x) = sup_{y \in A} f(x, y) $$

对称矩阵的最大特征值：定义函数$f(X) = \lambda_{max}(X)$，其定义域为$dom f = S^m$，它是凸函数。为了说明这一点，将$f$表述为：
$$ f(X) = sup\{y^TXy| \ ||y||_2 = 1\} $$

矩阵范数：
考虑函数$f(X) = ||X||_2 $，其定义域为$dom f = R^{p×q}$，其中$||*||_2$表示谱范数或者最大奇异值。函数$f$可以表述为
$$ f(X) = sup\{u^T X v| \ ||u||_2 = 1, ||v||_2 = 1 \} $$
由于它是$X$的一族线性函数的逐点上确界，所以是凸函数。

保持函数凸性的操作：函数的组合
$$h: R^k \rightarrow R \quad g: R^n \rightarrow R^k $$
$$ f = h \circ g \quad R^n \rightarrow R$$
$$ f(x) = h(g(x)) \quad domf = \{x \in domg| \quad g(x) \in domf \}  $$